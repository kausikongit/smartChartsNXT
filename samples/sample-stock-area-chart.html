<!DOCTYPE html>
<html lang="en">
<head>
  <script src="/smartChartsNXT/build/smartChartsNXT.bundle.js" type="text/javascript"></script>
  <script>
    async function getStock(stockId) {
      var data = await fetch(
        `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${stockId}&interval=5min&apikey=NSQWJINYQ9CB6GR3`
      );
      return await data.json();
    }

    window.onload = function () {
      //^BSESN, RCOM.NS, GRAPHITE.NS
      getStock('RCOM.NS').then(data => {
        dataSet = prepareData(data);
        displayChart('R-COM', dataSet);
      }).catch(ex => {
        dataSet = prepareData(getStaticData());
        displayChart('R-Com', dataSet);
      });
    };

    function prepareData(data) {
      var dataSet = [];
      for (key in data['Time Series (Daily)']) {
        dataSet.push({
          label: key,
          value: parseFloat(data['Time Series (Daily)'][key]['4. close'])
        });
      }
      dataSet = dataSet.filter(d => d.value > 0);
      return dataSet.reverse();
    }

    function displayChart(seriesName, dataSet) {
      console.log(dataSet);
      SmartChartsNXT.ready(function () {
        SmartChartsNXT.debug = false;
        let areaChart = new SmartChartsNXT.Chart({
          "type": $SC.CHART_TYPE.AREA_CHART,
          "targetElem": "chartContainer",
          "description": "A javascript area chart that visualize the data of sales",
          "title": {
            "text":"Stock Chart"
          },
          "subtitle": {
            "text":"Time Series (Daily)"
          },
          "canvasBorder": false,
          "bgColor": "#f7fdf7",
          "gridBox": {
            "vertical": {
              "enable": true
            },
            "horizontal": {
              "enable": true
            },
           "bgColor": 'skyblue',
           "bgGradient": $SC.ENUMS.GRADIENT_STYLE.LINEAR_VERTICAL,
           "bgOpacity": 0.2
          },
          "pointerCrosshair": {
            "vertical": {
              "style": $SC.ENUMS.LINE_STYLE.DASHED,
            },
            "horizontal": {
              "style": $SC.ENUMS.LINE_STYLE.SOLID
            }
          },
          "legends": {
            "enable": true
          },
          "tooltip": {
            "enable": true,
            "content": function () {
              return '<table>' +
                '<tbody>' +
                '<tr style="background-color: #aaa; font-size: 14px; text-align: left; color: #FFF;">' +
                '<th colspan="2" style="padding: 2px 5px; ">' + this[0].formattedLabel + '</th>' +
                '</tr>' +
                this.map(function (point) {
                  return '<tr>' +
                    '<td style="font-size: 13px; padding: 3px 6px; background-color: #fff;">' +
                    '<span style="background-color:' + point.seriesColor +
                    '; display:inline-block; width:10px; height:10px;margin-right:5px;"></span>' + point.seriesName +
                    '</td>' +
                    '<td style="font-size: 13px; padding: 3px 6px; background-color: #fff;">' + point.value +
                    '</td>' +
                    '</tr>';
                }).join('') +
                '</tbody>' +
                '</table>';
            },
            "xPadding": 3,
            "yPadding": 3,
          },
          "dataSet": {
            "xAxis": {
              "title": "Date",
              "parseAsDate": true,
              "dateFormat": "dd mmm",
              "labelRotate": -45,
              "intervalThreshold": 40,
              "tickOpacity": 1,
              "tickColor": '#222',
              "tickSpan": 5,
            },
            "yAxis": {
              "title": "Total Sales",
              "prefix": "\u20B9 ",
              "tickOpacity": 1,
              "tickColor": '#222',
              "tickSpan": 5,
              "zeroBase": false,
            },
            "series": [{
              "visible": true,
              "lineWidth": 1.5,
              "bgColor": "#2278b4",
              "name": seriesName,
              "areaOpacity": 0.3,
              "spline": false,
              "data": dataSet
            }]
          }
        });
      });
    }

    function getStaticData() {
      return {
        "Meta Data": {
          "1. Information": "Daily Prices (open, high, low, close) and Volumes",
          "2. Symbol": "RCOM.NS",
          "3. Last Refreshed": "2019-02-22",
          "4. Output Size": "Compact",
          "5. Time Zone": "US/Eastern"
        },
        "Time Series (Daily)": {
          "2019-02-22": {
            "1. open": "6.3500",
            "2. high": "7.6500",
            "3. low": "6.2500",
            "4. close": "6.5000",
            "5. volume": "244157493"
          },
          "2019-02-21": {
            "1. open": "5.8500",
            "2. high": "6.5500",
            "3. low": "5.7000",
            "4. close": "6.3500",
            "5. volume": "115064694"
          },
          "2019-02-20": {
            "1. open": "6.1000",
            "2. high": "6.1500",
            "3. low": "5.4500",
            "4. close": "5.7500",
            "5. volume": "134464383"
          },
          "2019-02-19": {
            "1. open": "6.2000",
            "2. high": "6.2000",
            "3. low": "5.9500",
            "4. close": "6.0000",
            "5. volume": "53952257"
          },
          "2019-02-18": {
            "1. open": "6.0500",
            "2. high": "6.8500",
            "3. low": "5.9000",
            "4. close": "6.1000",
            "5. volume": "105009120"
          },
          "2019-02-15": {
            "1. open": "5.5000",
            "2. high": "5.7000",
            "3. low": "5.4000",
            "4. close": "5.5000",
            "5. volume": "56200999"
          },
          "2019-02-14": {
            "1. open": "5.7500",
            "2. high": "5.7500",
            "3. low": "5.2000",
            "4. close": "5.5500",
            "5. volume": "90978467"
          },
          "2019-02-12": {
            "1. open": "5.3500",
            "2. high": "5.7500",
            "3. low": "5.1000",
            "4. close": "5.6500",
            "5. volume": "88569746"
          },
          "2019-02-11": {
            "1. open": "5.7500",
            "2. high": "5.7500",
            "3. low": "5.2000",
            "4. close": "5.3500",
            "5. volume": "62523776"
          },
          "2019-02-08": {
            "1. open": "4.9000",
            "2. high": "5.5500",
            "3. low": "4.9000",
            "4. close": "5.3500",
            "5. volume": "136497533"
          },
          "2019-02-07": {
            "1. open": "5.5000",
            "2. high": "5.7000",
            "3. low": "4.9000",
            "4. close": "5.2000",
            "5. volume": "186818436"
          },
          "2019-02-06": {
            "1. open": "5.2500",
            "2. high": "6.5500",
            "3. low": "4.8500",
            "4. close": "5.5000",
            "5. volume": "272318926"
          },
          "2019-02-05": {
            "1. open": "7.4500",
            "2. high": "7.5500",
            "3. low": "5.3500",
            "4. close": "5.5500",
            "5. volume": "393781922"
          },
          "2019-02-04": {
            "1. open": "10.4500",
            "2. high": "10.4500",
            "3. low": "5.3000",
            "4. close": "7.5500",
            "5. volume": "378845417"
          },
          "2019-02-01": {
            "1. open": "12.0000",
            "2. high": "12.1000",
            "3. low": "11.5000",
            "4. close": "11.6000",
            "5. volume": "56418188"
          },
          "2019-01-31": {
            "1. open": "11.5500",
            "2. high": "12.1000",
            "3. low": "10.9000",
            "4. close": "11.7500",
            "5. volume": "61641012"
          },
          "2019-01-30": {
            "1. open": "12.1000",
            "2. high": "12.3500",
            "3. low": "11.3500",
            "4. close": "11.5500",
            "5. volume": "43666454"
          },
          "2019-01-29": {
            "1. open": "12.0500",
            "2. high": "12.6000",
            "3. low": "12.0000",
            "4. close": "12.1000",
            "5. volume": "44626964"
          },
          "2019-01-28": {
            "1. open": "12.4500",
            "2. high": "12.4500",
            "3. low": "11.8500",
            "4. close": "12.1500",
            "5. volume": "47207121"
          },
          "2019-01-25": {
            "1. open": "12.8500",
            "2. high": "12.9500",
            "3. low": "12.3500",
            "4. close": "12.4500",
            "5. volume": "27002942"
          },
          "2019-01-24": {
            "1. open": "12.7500",
            "2. high": "13.2000",
            "3. low": "12.6500",
            "4. close": "12.8500",
            "5. volume": "62852835"
          },
          "2019-01-23": {
            "1. open": "13.3000",
            "2. high": "13.4000",
            "3. low": "12.8500",
            "4. close": "12.9500",
            "5. volume": "59736285"
          },
          "2019-01-22": {
            "1. open": "13.1000",
            "2. high": "13.4500",
            "3. low": "12.8500",
            "4. close": "13.3500",
            "5. volume": "59954052"
          },
          "2019-01-21": {
            "1. open": "13.4000",
            "2. high": "13.5000",
            "3. low": "13.0500",
            "4. close": "13.1000",
            "5. volume": "46124415"
          },
          "2019-01-18": {
            "1. open": "13.6000",
            "2. high": "13.6000",
            "3. low": "13.2500",
            "4. close": "13.3500",
            "5. volume": "50095135"
          },
          "2019-01-17": {
            "1. open": "13.8500",
            "2. high": "13.9500",
            "3. low": "13.4500",
            "4. close": "13.5500",
            "5. volume": "70098847"
          },
          "2019-01-16": {
            "1. open": "13.5000",
            "2. high": "14.1500",
            "3. low": "13.4000",
            "4. close": "13.8000",
            "5. volume": "69538057"
          },
          "2019-01-15": {
            "1. open": "13.4000",
            "2. high": "13.6000",
            "3. low": "13.3500",
            "4. close": "13.4500",
            "5. volume": "48091793"
          },
          "2019-01-14": {
            "1. open": "13.7000",
            "2. high": "13.7000",
            "3. low": "13.3500",
            "4. close": "13.4000",
            "5. volume": "32004610"
          },
          "2019-01-11": {
            "1. open": "13.9500",
            "2. high": "14.0000",
            "3. low": "13.6000",
            "4. close": "13.7000",
            "5. volume": "47896536"
          },
          "2019-01-10": {
            "1. open": "13.9000",
            "2. high": "14.0000",
            "3. low": "13.6500",
            "4. close": "13.8500",
            "5. volume": "51883452"
          },
          "2019-01-09": {
            "1. open": "14.1000",
            "2. high": "14.1500",
            "3. low": "13.6500",
            "4. close": "13.8000",
            "5. volume": "58166357"
          },
          "2019-01-08": {
            "1. open": "13.8000",
            "2. high": "14.1500",
            "3. low": "13.7000",
            "4. close": "14.0000",
            "5. volume": "70769680"
          },
          "2019-01-07": {
            "1. open": "14.2500",
            "2. high": "14.3500",
            "3. low": "13.6500",
            "4. close": "13.9000",
            "5. volume": "95262182"
          },
          "2019-01-04": {
            "1. open": "13.4000",
            "2. high": "14.2000",
            "3. low": "13.3000",
            "4. close": "14.0000",
            "5. volume": "139026951"
          },
          "2019-01-03": {
            "1. open": "13.7500",
            "2. high": "13.8500",
            "3. low": "13.4500",
            "4. close": "13.5000",
            "5. volume": "52405739"
          },
          "2019-01-02": {
            "1. open": "14.3500",
            "2. high": "14.4000",
            "3. low": "13.6000",
            "4. close": "13.8500",
            "5. volume": "92048688"
          },
          "2019-01-01": {
            "1. open": "14.5000",
            "2. high": "14.6000",
            "3. low": "14.1500",
            "4. close": "14.3500",
            "5. volume": "45185360"
          },
          "2018-12-31": {
            "1. open": "14.7500",
            "2. high": "14.9500",
            "3. low": "14.3000",
            "4. close": "14.4000",
            "5. volume": "71586882"
          },
          "2018-12-28": {
            "1. open": "14.3500",
            "2. high": "15.0500",
            "3. low": "14.3500",
            "4. close": "14.7000",
            "5. volume": "73248725"
          },
          "2018-12-27": {
            "1. open": "14.4500",
            "2. high": "14.6500",
            "3. low": "14.1500",
            "4. close": "14.5000",
            "5. volume": "69081337"
          },
          "2018-12-26": {
            "1. open": "14.1500",
            "2. high": "14.4500",
            "3. low": "13.8000",
            "4. close": "14.3000",
            "5. volume": "87089399"
          },
          "2018-12-24": {
            "1. open": "14.3500",
            "2. high": "14.5500",
            "3. low": "13.7500",
            "4. close": "14.1500",
            "5. volume": "95356659"
          },
          "2018-12-21": {
            "1. open": "14.5000",
            "2. high": "14.7000",
            "3. low": "14.0500",
            "4. close": "14.2000",
            "5. volume": "65912405"
          },
          "2018-12-20": {
            "1. open": "14.2500",
            "2. high": "14.6500",
            "3. low": "14.0500",
            "4. close": "14.3500",
            "5. volume": "85157043"
          },
          "2018-12-19": {
            "1. open": "14.2000",
            "2. high": "14.9500",
            "3. low": "13.6500",
            "4. close": "14.2500",
            "5. volume": "163060955"
          },
          "2018-12-18": {
            "1. open": "15.7000",
            "2. high": "16.0500",
            "3. low": "15.5000",
            "4. close": "15.7500",
            "5. volume": "70167746"
          },
          "2018-12-17": {
            "1. open": "15.9500",
            "2. high": "16.2500",
            "3. low": "15.5500",
            "4. close": "15.6500",
            "5. volume": "64347183"
          },
          "2018-12-14": {
            "1. open": "15.0500",
            "2. high": "16.5000",
            "3. low": "15.0500",
            "4. close": "15.7500",
            "5. volume": "142480206"
          },
          "2018-12-13": {
            "1. open": "15.6500",
            "2. high": "16.0500",
            "3. low": "14.9000",
            "4. close": "15.4000",
            "5. volume": "86873709"
          },
          "2018-12-12": {
            "1. open": "15.9500",
            "2. high": "16.3000",
            "3. low": "15.4500",
            "4. close": "15.6500",
            "5. volume": "84008027"
          },
          "2018-12-11": {
            "1. open": "14.0000",
            "2. high": "16.1000",
            "3. low": "13.6500",
            "4. close": "15.4000",
            "5. volume": "132082016"
          },
          "2018-12-10": {
            "1. open": "15.3000",
            "2. high": "15.5000",
            "3. low": "14.5000",
            "4. close": "14.7500",
            "5. volume": "73729982"
          },
          "2018-12-07": {
            "1. open": "16.6000",
            "2. high": "17.0000",
            "3. low": "15.6000",
            "4. close": "15.7500",
            "5. volume": "133398785"
          },
          "2018-12-06": {
            "1. open": "16.0000",
            "2. high": "16.5000",
            "3. low": "15.2500",
            "4. close": "16.3000",
            "5. volume": "137774119"
          },
          "2018-12-05": {
            "1. open": "17.0000",
            "2. high": "17.5000",
            "3. low": "16.1000",
            "4. close": "16.2500",
            "5. volume": "174862607"
          },
          "2018-12-04": {
            "1. open": "17.1000",
            "2. high": "18.6500",
            "3. low": "16.9000",
            "4. close": "17.1000",
            "5. volume": "323613170"
          },
          "2018-12-03": {
            "1. open": "15.2000",
            "2. high": "16.8500",
            "3. low": "14.7000",
            "4. close": "16.6000",
            "5. volume": "264930325"
          },
          "2018-11-30": {
            "1. open": "12.6000",
            "2. high": "14.6500",
            "3. low": "12.5500",
            "4. close": "14.2500",
            "5. volume": "155035529"
          },
          "2018-11-29": {
            "1. open": "13.1500",
            "2. high": "13.2500",
            "3. low": "12.4500",
            "4. close": "12.7500",
            "5. volume": "35843615"
          },
          "2018-11-28": {
            "1. open": "13.4000",
            "2. high": "13.4500",
            "3. low": "13.0000",
            "4. close": "13.1000",
            "5. volume": "29712360"
          },
          "2018-11-27": {
            "1. open": "13.3000",
            "2. high": "13.6000",
            "3. low": "13.0500",
            "4. close": "13.3000",
            "5. volume": "48528221"
          },
          "2018-11-26": {
            "1. open": "13.3500",
            "2. high": "13.6000",
            "3. low": "13.0000",
            "4. close": "13.3000",
            "5. volume": "38401855"
          },
          "2018-11-22": {
            "1. open": "13.9500",
            "2. high": "14.0500",
            "3. low": "13.2000",
            "4. close": "13.3000",
            "5. volume": "55337728"
          },
          "2018-11-21": {
            "1. open": "13.5500",
            "2. high": "13.9000",
            "3. low": "13.5000",
            "4. close": "13.7500",
            "5. volume": "35165344"
          },
          "2018-11-20": {
            "1. open": "14.0500",
            "2. high": "14.3000",
            "3. low": "13.3500",
            "4. close": "13.5500",
            "5. volume": "56965684"
          },
          "2018-11-19": {
            "1. open": "13.6000",
            "2. high": "14.7500",
            "3. low": "13.4500",
            "4. close": "14.1000",
            "5. volume": "75131002"
          },
          "2018-11-16": {
            "1. open": "13.5000",
            "2. high": "13.7000",
            "3. low": "13.1500",
            "4. close": "13.5500",
            "5. volume": "51881650"
          },
          "2018-11-15": {
            "1. open": "13.7000",
            "2. high": "13.7000",
            "3. low": "13.3500",
            "4. close": "13.4000",
            "5. volume": "19041611"
          },
          "2018-11-14": {
            "1. open": "13.6000",
            "2. high": "13.9000",
            "3. low": "13.3000",
            "4. close": "13.7000",
            "5. volume": "34668195"
          },
          "2018-11-13": {
            "1. open": "13.9000",
            "2. high": "13.9000",
            "3. low": "13.2000",
            "4. close": "13.5500",
            "5. volume": "41543656"
          },
          "2018-11-12": {
            "1. open": "13.8000",
            "2. high": "14.6000",
            "3. low": "13.7500",
            "4. close": "13.8500",
            "5. volume": "43675188"
          },
          "2018-11-09": {
            "1. open": "13.7000",
            "2. high": "14.3000",
            "3. low": "13.5000",
            "4. close": "14.2000",
            "5. volume": "40369648"
          },
          "2018-11-07": {
            "1. open": "14.1000",
            "2. high": "14.1000",
            "3. low": "13.8000",
            "4. close": "13.8500",
            "5. volume": "6003489"
          },
          "2018-11-06": {
            "1. open": "14.2000",
            "2. high": "14.4000",
            "3. low": "13.6500",
            "4. close": "13.8000",
            "5. volume": "35245855"
          },
          "2018-11-05": {
            "1. open": "14.9500",
            "2. high": "14.9500",
            "3. low": "13.4500",
            "4. close": "14.1000",
            "5. volume": "69148992"
          },
          "2018-11-02": {
            "1. open": "14.3500",
            "2. high": "15.2500",
            "3. low": "13.8500",
            "4. close": "14.1000",
            "5. volume": "111904630"
          },
          "2018-11-01": {
            "1. open": "12.5000",
            "2. high": "14.2000",
            "3. low": "12.5000",
            "4. close": "14.1000",
            "5. volume": "144618228"
          },
          "2018-10-31": {
            "1. open": "11.7000",
            "2. high": "12.5000",
            "3. low": "11.6500",
            "4. close": "12.3500",
            "5. volume": "73037865"
          },
          "2018-10-30": {
            "1. open": "10.8500",
            "2. high": "11.9500",
            "3. low": "10.7500",
            "4. close": "11.6500",
            "5. volume": "92640562"
          },
          "2018-10-29": {
            "1. open": "9.9000",
            "2. high": "11.0500",
            "3. low": "9.6000",
            "4. close": "10.9000",
            "5. volume": "89042912"
          },
          "2018-10-26": {
            "1. open": "10.3500",
            "2. high": "10.4000",
            "3. low": "9.8000",
            "4. close": "10.0000",
            "5. volume": "52165776"
          },
          "2018-10-25": {
            "1. open": "10.9000",
            "2. high": "10.9000",
            "3. low": "10.3000",
            "4. close": "10.3500",
            "5. volume": "42867256"
          },
          "2018-10-24": {
            "1. open": "10.9500",
            "2. high": "11.2000",
            "3. low": "10.7500",
            "4. close": "11.0000",
            "5. volume": "33772304"
          },
          "2018-10-23": {
            "1. open": "10.9000",
            "2. high": "11.3000",
            "3. low": "10.6000",
            "4. close": "10.8500",
            "5. volume": "49480136"
          },
          "2018-10-22": {
            "1. open": "11.2500",
            "2. high": "11.3500",
            "3. low": "10.8000",
            "4. close": "10.9000",
            "5. volume": "32771738"
          },
          "2018-10-19": {
            "1. open": "11.5500",
            "2. high": "11.5500",
            "3. low": "11.0000",
            "4. close": "11.1500",
            "5. volume": "42531236"
          },
          "2018-10-17": {
            "1. open": "11.9500",
            "2. high": "12.1000",
            "3. low": "11.2500",
            "4. close": "11.3500",
            "5. volume": "43163846"
          },
          "2018-10-16": {
            "1. open": "11.6500",
            "2. high": "12.0000",
            "3. low": "11.6500",
            "4. close": "11.8000",
            "5. volume": "36017651"
          },
          "2018-10-15": {
            "1. open": "11.8000",
            "2. high": "12.0000",
            "3. low": "11.5000",
            "4. close": "11.6500",
            "5. volume": "48666488"
          },
          "2018-10-12": {
            "1. open": "11.4500",
            "2. high": "12.2000",
            "3. low": "11.3500",
            "4. close": "11.6500",
            "5. volume": "81241350"
          },
          "2018-10-11": {
            "1. open": "11.1000",
            "2. high": "11.5000",
            "3. low": "10.7000",
            "4. close": "11.1000",
            "5. volume": "52145852"
          },
          "2018-10-10": {
            "1. open": "11.2000",
            "2. high": "11.7000",
            "3. low": "11.0500",
            "4. close": "11.4500",
            "5. volume": "59429079"
          },
          "2018-10-09": {
            "1. open": "11.0500",
            "2. high": "11.3000",
            "3. low": "10.6000",
            "4. close": "11.0500",
            "5. volume": "62414174"
          },
          "2018-10-08": {
            "1. open": "11.4500",
            "2. high": "11.7500",
            "3. low": "10.7000",
            "4. close": "11.0500",
            "5. volume": "75958335"
          },
          "2018-10-05": {
            "1. open": "11.8500",
            "2. high": "12.1500",
            "3. low": "11.3000",
            "4. close": "11.4500",
            "5. volume": "56941722"
          },
          "2018-10-04": {
            "1. open": "11.8000",
            "2. high": "12.5500",
            "3. low": "11.6000",
            "4. close": "11.8500",
            "5. volume": "109738369"
          },
          "2018-10-03": {
            "1. open": "11.6500",
            "2. high": "12.4500",
            "3. low": "11.3000",
            "4. close": "11.8000",
            "5. volume": "73788111"
          },
          "2018-10-01": {
            "1. open": "11.9000",
            "2. high": "12.1000",
            "3. low": "11.1000",
            "4. close": "11.9500",
            "5. volume": "68946146"
          },
          "2018-09-28": {
            "1. open": "12.5000",
            "2. high": "12.7500",
            "3. low": "11.7000",
            "4. close": "11.9000",
            "5. volume": "62225689"
          }
        }
      }
    }
  </script>
</head>

<body style='background: rgb(34, 120, 180);'>
  <div>
    <div id='chartContainer' style="width:100%; height:600px;">
    </div>
  </div>
</body>

</html>